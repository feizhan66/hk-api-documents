##<span style="color:#2b7db0">申请退款</span>

#### 应用场景

当交易发生之后一段时间内，由于买家或者卖家的原因需要退款时，卖家可以通过退款接口将支付款退还给买家，

微信支付将在收到退款请求并且验证成功之后，按照退款规则将支付款按原路退到买家帐号上。  

##### 注意：  

1. 交易时间超过一年的订单无法提交退款；

2. 微信支付退款支持单笔交易分多次退款，多次退款需要提交原支付订单的商户订单号和设置不同的退款单号。

   申请退款总金额不能超过订单金额。 一笔退款失败后重新提交，请不要更换退款单号，请使用原商户退款单号。  

3. 请求频率限制：`150qps`，即每秒钟正常的申请退款请求次数不超过150次

   错误或无效请求频率限制：`6qps`，即每秒钟异常或错误的退款申请请求不超过6次  

4. 每个支付订单的部分退款次数不能超过50次  
  
#### 接口地址

api：

```
/wechat/payment/refund
```

#### 请求参数

字段|变量名|必填|类型|描述
----|----|----|----|----
接口ID|appid|是|String(32)|由蓝海支付提供的接口应用ID
随机字符串|nonce_str|是|String(32)|随机字符串
签名|sign|是|String(32)|详情见签名规则
微信订单号|transaction_id|否|String(32)|微信的订单号
商户订单号|out_trade_no|是|String(32)|商户订单号
商户退单号|out_refund_no|是|String(32)|商户退单号
标价金额|total_fee|是|Int|标价金额，港币最小单位分
退款金额|refund_fee|是|Int|退款金额，港币最小单位分
退款原因|refund_desc|否|String(80)|退款原因，简要说明


#### 返回结果

字段|变量名|必填|类型|描述
----|----|----|----|----
返回码|code|是|String(32)|返回码，请参考返回码表
返回信息|message|是|String(256)|返回信息，成功信息或错误信息
返回数据|data|否|Array/String|返回数据集或其他提示信息
  
###### 如果code=200,data参数：  

字段|变量名|必填|类型|描述
----|----|----|----|----
微信订单号|transaction_id|是|String(28)|微信订单号
商户订单号|out\_trade_no|是|String(32)|商户订单号
商户退单号|out\_refund_no|是|String(32)|商户退单号
微信退单号|refund_id|是|String(64)|微信退单号
标价金额|total_fee|是|Int|最小单位港币分
标价币种|fee_type|是|String(8)|一般是HKD
退款金额|refund\_fee|是|Int|最小单位港币分
退款币种|refund\_fee_type|是|String(8)|一般是HKD
现金支付金额|cash_fee|是|Int|最小单位人民币分
现金支付币种|cash\_fee_type|是|String(8)|默认是CNY
现金退款金额|cash\_refund_fee|是|Int|最小单位人民币分
现金退款币种|cash\_refund\_fee_type|是|String(8)|默认是CNY
汇率|rate|是|String(16)|汇率